--@name ChangedLib
--@author Sparky
--@shared

local changed =
{
    __index = function(t,k)
        return t.__data[k] - t.__lastdata[k]
    end,
    __newindex = function(t,k,v)
        if t.__lastdata[k] then
            t.__lastdata[k] = t.data[k]
            t.__data[k] = v
        else
            t.__data[k] = v
            t.__lastdata[k] = v
        end
    end,
}

return function() return setmetatable({__lastdata = {}, __data = {}}, changed) end
